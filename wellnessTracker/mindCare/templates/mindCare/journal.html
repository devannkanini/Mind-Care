{% extends 'mindCare/home.html' %}
{% load static %}

{% block content %}
<div class="container mt-5">
    <h2 class="fw-bold text-primary mb-4">Write Your Journal ğŸ“</h2>

    <form method="POST">
        {% csrf_token %}
        <div class="mb-3">
            <label for="content" class="form-label">Whatâ€™s on your mind today?</label>
            <textarea class="form-control" id="content" name="content" rows="6" placeholder="Write here..." required></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Save Journal</button>
    </form>
    
    <hr class="my-5">

    <h3>My Entries</h3>

    {% if journals %} 
        {% for entry in journals %}
            <div class="card mb-3">
                <div class="card-body">
                    <h5 class="card-title">{{ entry.title|default:"Untitled Entry" }}</h5>
                    <p class="card-text text-muted">{{ entry.date_created|date:"F j, Y, P" }}</p>
                    <p class="card-text">{{ entry.content|truncatechars:100 }}</p>
                    
                    <div class="btn-group" role="group">
                       <a href="{% url 'mindCare:journal_detail' entry.id %}" class="btn btn-sm btn-primary">
    <i class="bi bi-eye"></i> View
</a>
                       <a href="{% url 'mindCare:delete_journal' entry.id %}" class="btn btn-sm btn-danger">
    <i class="bi bi-trash"></i> Delete
</a>
                    </div>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="alert alert-info mt-3">
            <p class="mb-0">No journal entries yet. Start writing your first entry!</p>
        </div>
    {% endif %}

</div>
{% endblock %}